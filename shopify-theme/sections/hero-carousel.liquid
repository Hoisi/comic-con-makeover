{% comment %}
  Hero Carousel Section - Hyde Hermit Studio
{% endcomment %}

<section class="hero-carousel" x-data="{ activeSlide: 0 }">
  {% for block in section.blocks %}
    <div 
      class="hero-slide" 
      x-show="activeSlide === {{ forloop.index0 }}"
      x-transition:enter="transition ease-out duration-500"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      {{ block.shopify_attributes }}
    >
      {% if block.settings.image %}
        <img src="{{ block.settings.image | img_url: '1920x' }}" alt="{{ block.settings.title | escape }}">
      {% else %}
        {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
      {% endif %}
      
      <div class="hero-overlay"></div>
      
      <div class="hero-content">
        <div class="container">
          <div class="hero-text animate-fade-in">
            <h2 class="hero-title">{{ block.settings.title }}</h2>
            <p class="hero-subtitle">{{ block.settings.subtitle }}</p>
            {% if block.settings.button_text != blank %}
              <a href="{{ block.settings.button_link }}" class="btn btn-hero">
                {{ block.settings.button_text }}
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% endfor %}

  <!-- Navigation Arrows -->
  <button 
    class="hero-nav-btn prev" 
    @click="activeSlide = activeSlide === 0 ? {{ section.blocks.size | minus: 1 }} : activeSlide - 1"
    aria-label="Previous slide"
  >
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="m15 18-6-6 6-6"/>
    </svg>
  </button>
  
  <button 
    class="hero-nav-btn next" 
    @click="activeSlide = activeSlide === {{ section.blocks.size | minus: 1 }} ? 0 : activeSlide + 1"
    aria-label="Next slide"
  >
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="m9 18 6-6-6-6"/>
    </svg>
  </button>

  <!-- Dots Indicator -->
  <div class="hero-dots">
    {% for block in section.blocks %}
      <button 
        class="hero-dot" 
        :class="{ 'active': activeSlide === {{ forloop.index0 }} }"
        @click="activeSlide = {{ forloop.index0 }}"
        aria-label="Go to slide {{ forloop.index }}"
      ></button>
    {% endfor %}
  </div>
</section>

<!-- Auto-advance script -->
<script>
  document.addEventListener('alpine:init', () => {
    setInterval(() => {
      const carousel = document.querySelector('[x-data]');
      if (carousel && carousel.__x) {
        const current = carousel.__x.$data.activeSlide;
        const total = {{ section.blocks.size }};
        carousel.__x.$data.activeSlide = current === total - 1 ? 0 : current + 1;
      }
    }, 5000);
  });
</script>

{% schema %}
{
  "name": "Hero Carousel",
  "tag": "section",
  "class": "hero-carousel-section",
  "max_blocks": 5,
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Background Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Unlock Your Creative Spirit"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "Handcrafted curiosities and custom creations"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Explore Products"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Carousel",
      "blocks": [
        {
          "type": "slide",
          "settings": {
            "title": "Unlock Your Creative Spirit",
            "subtitle": "Handcrafted curiosities and custom creations",
            "button_text": "Explore Products"
          }
        },
        {
          "type": "slide",
          "settings": {
            "title": "Custom Creations Made Real",
            "subtitle": "Transform your imagination into tangible art",
            "button_text": "Start Custom Order"
          }
        },
        {
          "type": "slide",
          "settings": {
            "title": "Enchanting Miniatures",
            "subtitle": "Each piece tells its own magical story",
            "button_text": "View Collection"
          }
        }
      ]
    }
  ]
}
{% endschema %}
